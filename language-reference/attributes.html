
<!DOCTYPE HTML>
<html lang="ja" >
    <head>
        <meta charset="UTF-8">
        <title>属性(Attributes) · The Swift Programming Language日本語版</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.7.5">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expand-active-chapter/expand-active-chapter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-insert-logo/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="patterns.html" />
    
    
    <link rel="prev" href="declarations.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="検索ワードを入力" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    The Swift Programming Language(日本語版)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Swiftへようこそ(WELCOME TO SWIFT)</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../welcome-to-swift/about-swift.html">
            
                <a href="../welcome-to-swift/about-swift.html">
            
                    
                    Swiftについて(About Swift)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../welcome-to-swift/version-compatibility.html">
            
                <a href="../welcome-to-swift/version-compatibility.html">
            
                    
                    バージョン互換性(Version Compatibility)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../welcome-to-swift/a-swift-tour.html">
            
                <a href="../welcome-to-swift/a-swift-tour.html">
            
                    
                    Swiftツアー(A Swift Tour)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">言語ガイド(LANGUAGE GUIDE)</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../language-guide/the-basics.html">
            
                <a href="../language-guide/the-basics.html">
            
                    
                    基本(The Basics)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../language-guide/basic-operators.html">
            
                <a href="../language-guide/basic-operators.html">
            
                    
                    基本演算子(Basic Operators)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../language-guide/strings-and-characters.html">
            
                <a href="../language-guide/strings-and-characters.html">
            
                    
                    文字と文字列(Strings and Characters)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../language-guide/collection-types.html">
            
                <a href="../language-guide/collection-types.html">
            
                    
                    コレクション型(Collection Types)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../language-guide/control-flow.html">
            
                <a href="../language-guide/control-flow.html">
            
                    
                    制御フロー(Control Flow)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="../language-guide/functions.html">
            
                <a href="../language-guide/functions.html">
            
                    
                    関数(Functions)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="../language-guide/closures.html">
            
                <a href="../language-guide/closures.html">
            
                    
                    クロージャ(Closures)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="../language-guide/enumerations.html">
            
                <a href="../language-guide/enumerations.html">
            
                    
                    列挙型(Enumerations)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="../language-guide/structures-and-classes.html">
            
                <a href="../language-guide/structures-and-classes.html">
            
                    
                    構造体とクラス(Structures and Classes)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="../language-guide/properties.html">
            
                <a href="../language-guide/properties.html">
            
                    
                    プロパティ(Properties)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="../language-guide/methods.html">
            
                <a href="../language-guide/methods.html">
            
                    
                    メソッド(Methods)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.12" data-path="../language-guide/subscripts.html">
            
                <a href="../language-guide/subscripts.html">
            
                    
                    サブスクリプト(Subscripts)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.13" data-path="../language-guide/inheritance.html">
            
                <a href="../language-guide/inheritance.html">
            
                    
                    継承(Inheritance)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.14" data-path="../language-guide/initialization.html">
            
                <a href="../language-guide/initialization.html">
            
                    
                    初期化(Initialization)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.15" data-path="../language-guide/deinitialization.html">
            
                <a href="../language-guide/deinitialization.html">
            
                    
                    デイニシャライゼーション(Deinitialization)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.16" data-path="../language-guide/optional-chaining.html">
            
                <a href="../language-guide/optional-chaining.html">
            
                    
                    オプショナルチェーン(Optional Chaining)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.17" data-path="../language-guide/error-handling.html">
            
                <a href="../language-guide/error-handling.html">
            
                    
                    エラー処理(Error Handling)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.18" data-path="../language-guide/concurrency.html">
            
                <a href="../language-guide/concurrency.html">
            
                    
                    同時並行処理(Concurrency)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.19" data-path="../language-guide/macros.html">
            
                <a href="../language-guide/macros.html">
            
                    
                    マクロ(Macros)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.20" data-path="../language-guide/type-casting.html">
            
                <a href="../language-guide/type-casting.html">
            
                    
                    型キャスト(Type Casting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.21" data-path="../language-guide/nested-types.html">
            
                <a href="../language-guide/nested-types.html">
            
                    
                    ネスト型(Nested Types)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.22" data-path="../language-guide/extensions.html">
            
                <a href="../language-guide/extensions.html">
            
                    
                    拡張(Extensions)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.23" data-path="../language-guide/protocols.html">
            
                <a href="../language-guide/protocols.html">
            
                    
                    プロトコル(Protocols)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.24" data-path="../language-guide/generics.html">
            
                <a href="../language-guide/generics.html">
            
                    
                    ジェネリクス(Generics)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.25" data-path="../language-guide/opaque-types.html">
            
                <a href="../language-guide/opaque-types.html">
            
                    
                    Opaque 型とBox プロトコル型(Opaque Types and Boxed Types)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.26" data-path="../language-guide/automatic-reference-counting.html">
            
                <a href="../language-guide/automatic-reference-counting.html">
            
                    
                    自動参照カウント ARC(Automatic Reference Counting)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.27" data-path="../language-guide/memory-safety.html">
            
                <a href="../language-guide/memory-safety.html">
            
                    
                    メモリ安全性(Memory Safety)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.28" data-path="../language-guide/access-control.html">
            
                <a href="../language-guide/access-control.html">
            
                    
                    アクセスコントロール(Access Control)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.29" data-path="../language-guide/advanced-operators.html">
            
                <a href="../language-guide/advanced-operators.html">
            
                    
                    高度な演算子(Advanced Operators)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">言語リファレンス(LANGUAGE REFERENCE)</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="about-the-language-reference.html">
            
                <a href="about-the-language-reference.html">
            
                    
                    言語リファレンスについて(About the Language Reference)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="lexical-structure.html">
            
                <a href="lexical-structure.html">
            
                    
                    字句構造(Lexical Structure)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="types.html">
            
                <a href="types.html">
            
                    
                    型(Types)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="expressions.html">
            
                <a href="expressions.html">
            
                    
                    式(Expressions)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="statements.html">
            
                <a href="statements.html">
            
                    
                    文(Statements)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="declarations.html">
            
                <a href="declarations.html">
            
                    
                    宣言(Declarations)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.7" data-path="attributes.html">
            
                <a href="attributes.html">
            
                    
                    属性(Attributes)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="patterns.html">
            
                <a href="patterns.html">
            
                    
                    パターン(Patterns)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="generic-parameters-and-arguments.html">
            
                <a href="generic-parameters-and-arguments.html">
            
                    
                    ジェネリックパラメータと引数(Generic Parameters and Arguments)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.10" data-path="summary-of-the-grammar.html">
            
                <a href="summary-of-the-grammar.html">
            
                    
                    文法のまとめ(Summary of the Grammar)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">REVISION HISTORY (改訂履歴)</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../revision-history/document-revision-history.html">
            
                <a href="../revision-history/document-revision-history.html">
            
                    
                    ドキュメント改訂履歴(Document Revision History)
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            HonKitで公開 
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >属性(Attributes)</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="属性attributes">属性(Attributes)</h1>
<p>最終更新日: 2023/11/12<br>原文: <a href="https://docs.swift.org/swift-book/ReferenceManual/Attributes.html" target="_blank">https://docs.swift.org/swift-book/ReferenceManual/Attributes.html</a></p>
<p>宣言と型に情報を追加する。</p>
<p>Swift には、宣言に適用される属性と型に適用される属性の 2 種類があります。属性は、宣言または型に関する追加情報を提供します。例えば、関数宣言の <code>discardableResult</code> 属性は、関数は値を返しますが、戻り値が使用されていない場合に、コンパイラが警告を生成しないことを示します。</p>
<p><code>@</code> 記号に続けて属性の名前と、属性が受け入れる引数を書き込むことにより、属性を指定します。</p>
<pre class="language-"><code class="lang-swift">@<span class="token operator">&lt;</span><span class="token other-directive property">#attribute</span> name#<span class="token operator">&gt;</span>
@<span class="token operator">&lt;</span><span class="token other-directive property">#attribute</span> name#<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token other-directive property">#attribute</span> arguments#<span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre>
<p>一部の宣言属性は、属性とそれが特定の宣言にどのように適用されるかについての詳細情報を指定する引数を受け入れます。これらの <em>attribute arguments</em> は括弧(<code>()</code>)で囲まれ、その形式は属する属性によって定義されています。</p>
<p>付属型マクロとプロパティラッパも属性構文を使用します。マクロの展開方法については、<a href="expressions.html#マクロ展開式macro-expansion-expression">マクロ展開</a>を参照してください。プロパティ・ラッパについては、<a href="#propertywrapper">propertyWrapper</a>を参照してください。</p>
<h2 id="宣言属性declaration-attributes"><a id="declaration-attributes">宣言属性(Declaration Attributes)</a></h2>
<p>宣言属性は宣言にのみ適用できます。</p>
<h3 id="attached">attached</h3>
<p>マクロ宣言に <code>attached</code> 属性を適用します。この属性の引数は、マクロの役割を示します。複数の役割を持つマクロの場合、各役割に対して 1 回ずつ、<code>attached</code> マクロを複数回適用します。</p>
<p>この属性の最初の引数は、マクロの役割を示します:</p>
<ul>
<li>ピアマクロ(Peer macros): この属性の第 1 引数に <code>peer</code> を書く。このマクロを実装する型は、<code>PeerMacro</code> プロトコルに準拠する。これらのマクロは、マクロが添付されている宣言と同じスコープで新しい宣言を生成する。例えば、構造体のメソッドにピアマクロを適用すると、その構造体に追加のメソッドとプロパティを定義することができる</li>
<li>メンバマクロ(Member macro): この属性の最初の引数として <code>member</code> を記述する。このマクロを実装する型は、<code>MemberMacro</code> プロトコルに準拠する。これらのマクロは、マクロが添付されている型または <code>extension</code> のメンバの新しい宣言を生成する。例えば、構造体宣言にメンバマクロを適用すると、その構造体に追加のメソッドとプロパティを定義できる</li>
<li>メンバ属性(Member attribute): この属性の第 1 引数として <code>memberAttribute</code> を書く。このマクロを実装する型は、MemberAttributeMacro プロトコルに準拠する。これらのマクロは、マクロが添付されている型または <code>extension</code> のメンバに属性を追加する</li>
<li>アクセサマクロ(Accessor macros): この属性の第 1 引数としてアクセサを書く。このマクロを実装する型は <code>AccessorMacro</code> プロトコルに準拠する。これらのマクロは、マクロが添付されている格納プロパティにアクセサを追加し、それを計算プロパティに変換する</li>
<li>Extension マクロ(Extension macros): この属性の最初の引数として <code>extension</code> を書く。このマクロを実装した型は、<code>ExtensionMacro</code> プロトコルに準拠する。このマクロは、プロトコルへの準拠、<code>where</code> 句およびこのマクロが添付されている型のメンバとして新しい宣言を追加する。マクロがプロトコルへの準拠を追加する場合、<code>conformances:</code> 引数を加えて準拠するプロトコルを特定する。準拠リストにはプロトコル名、準拠リスト内の項目を参照するタイプエイリアス、あるいは準拠リスト内の項目のプロトコル合成が含まれる。入れ子になった型の extension マクロは、そのファイルのトップレベルの extension として展開される。extension、タイプエイリアス、関数の内部に入れ子になっている型に extension マクロを記述したり、ピアマクロを持つ extension を追加するために extension マクロを使用することはできない</li>
</ul>
<p>ピアメンバおよびアクセサマクロには、マクロが生成するシンボルの名前を列挙した <code>names:</code> 引数が必要です。マクロが extension の内部に宣言を追加する場合、extension マクロにも <code>names:</code> 引数が必要です。マクロ宣言に <code>names:</code> 引数が含まれる場合、マクロの実装は、そのリストに一致する名前を持つシンボルだけを生成しなければなりません。とはいえ、マクロは列挙されたすべての名前に対してシンボルを生成する必要はありません。この引数の値は、下記の内の 1 つまたはそれ以上のリストです:</p>
<ul>
<li><code>named(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#name#</span><span class="token punctuation">&gt;</span></span>)</code> あらかじめ分かっている名前に対して固定のシンボル名を付与する<em>名前</em></li>
<li><code>overloaded</code> 既存のシンボルと同じ名前に対して上書きする</li>
<li><code>prefixed(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#prefix#</span><span class="token punctuation">&gt;</span></span>)</code> 固定の文字列で始まる名前のシンボル名の前に付加される<em>プレフィックス</em></li>
<li><code>suffixed(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#suffix#</span><span class="token punctuation">&gt;</span></span>)</code> 固定の文字列で終わる名前のシンボル名の後に付加される<em>サフィックス</em></li>
<li><code>arbitrary</code> マクロが展開するまで確定できない名前に対して付与する</li>
</ul>
<p>特殊なケースとして、プロパティラッパに似た動作をするマクロに <code>prefixed($)</code> を書くことができます。</p>
<h3 id="available">available</h3>
<p>この属性を適用すると、特定の Swift 言語バージョンまたは特定のプラットフォームとオペレーティングシステムのバージョンに関連する宣言のライフサイクルを示します。</p>
<p><code>available</code> 属性は、常に 2 つ以上のカンマ区切り(<code>,</code>)の属性引数のリストを伴います。これらの引数は、次のプラットフォーム名または言語名のいずれかで始まります:</p>
<ul>
<li><code>iOS</code></li>
<li><code>iOSApplicationExtension</code></li>
<li><code>macOS</code></li>
<li><code>macOSApplicationExtension</code></li>
<li><code>macCatalyst</code></li>
<li><code>macCatalystApplicationExtension</code></li>
<li><code>watchOS</code></li>
<li><code>watchOSApplicationExtension</code></li>
<li><code>tvOS</code></li>
<li><code>tvOSApplicationExtension</code></li>
<li><code>visionOS</code></li>
<li><code>swift</code></li>
</ul>
<p>アスタリスク(<code>*</code>)を使用して、上記の全てのプラットフォーム名で宣言が使用可能だと示すこともできます。Swift のバージョン番号を使用してアベイラビリティを指定する <code>available</code> 属性では、アスタリスクを使用できません。</p>
<p>残りの引数は任意の順序で記述でき、重要なマイルストーンなど、宣言のライフサイクルに関する追加情報を指定できます。</p>
<ul>
<li><code>unavailable</code> 引数は、指定されたプラットフォームで宣言が使用できないことを示します。この引数は、Swift のアベイラビリティバージョンを指定している場合は使用できません</li>
<li><p><code>introduced</code> 引数は、宣言が導入された特定のプラットフォームまたは言語の最初のバージョンを示します。形式は次のとおりです:</p>
<pre class="language-"><code class="lang-swift">introduced<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token other-directive property">#version</span> number#<span class="token operator">&gt;</span>
</code></pre>
</li>
</ul>
<p><em>version number</em> は、ピリオド(<code>.</code>)で区切られた 1〜3 個の正の整数で構成されます。</p>
<ul>
<li><p><code>deprecated</code> 引数は、宣言が非推奨になった特定のプラットフォームまたは言語の最初のバージョンを示します。形式は次のとおりです:</p>
<pre class="language-"><code class="lang-swift">deprecated<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token other-directive property">#version</span> number#<span class="token operator">&gt;</span>
</code></pre>
</li>
</ul>
<p>任意の <em>version number</em> は、ピリオド(<code>.</code>)で区切られた 1〜3 個の正の整数で構成されます。バージョン番号を省略すると、deprecated がいつ発生したかについての情報を提供せずに、宣言が現在 deprecated になっていることのみを示します。バージョン番号を省略する場合は、コロン(<code>:</code>)も省略してください。</p>
<ul>
<li><p><code>obsoleted</code> 引数は、宣言が廃止された特定のプラットフォームまたは言語の最初のバージョンを示します。宣言が廃止されると、指定されたプラットフォームまたは言語から削除され、使用できなくなります。形式は次のとおりです:</p>
<pre class="language-"><code class="lang-swift">obsoleted<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token other-directive property">#version</span> number#<span class="token operator">&gt;</span>
</code></pre>
</li>
</ul>
<p><em>version number</em> は、ピリオド(<code>.</code>)で区切られた 1〜3 個の正の整数で構成されます。</p>
<ul>
<li><p><code>message</code> 引数は、deprecated または obsoleted された宣言に使用した際に、コンパイラが表示する警告またはエラーのテキストメッセージを提供します。形式は次のとおりです:</p>
<pre class="language-"><code class="lang-swift">message<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token other-directive property">#message</span>#<span class="token operator">&gt;</span>
</code></pre>
</li>
</ul>
<p><em>message</em> は文字列リテラルで構成されます。</p>
<ul>
<li><p><code>renamed</code> 引数は、名前が変更された宣言の新しい名前を示すテキストメッセージを提供します。コンパイラは、名前が変更された宣言が使用された際にエラーを発行し、新しい名前を表示します。形式は次のとおりです:</p>
<pre class="language-"><code class="lang-swift">renamed<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token other-directive property">#new</span> name#<span class="token operator">&gt;</span>
</code></pre>
</li>
</ul>
<p><em>new name</em> は文字列リテラルで構成されます。</p>
<p>下記に示すように、フレームワークまたはライブラリのリリース間で宣言の名前が変更されたことを示すために、タイプエイリアス宣言に <code>renamed</code> 引数と <code>unavailable</code> 引数を持つ <code>available</code> 属性を適用することができます。この組み合わせにより、宣言の名前が変更されたというコンパイルエラーが発生します。</p>
<pre class="language-"><code class="lang-swift"><span class="token comment">// 初回リリース</span>
<span class="token keyword">protocol</span> <span class="token class-name">MyProtocol</span> <span class="token punctuation">{</span>
    <span class="token comment">// プロトコル定義</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code class="lang-swift"><span class="token comment">// MyProtocolの名前変更後のリリース</span>
<span class="token keyword">protocol</span> <span class="token class-name">MyRenamedProtocol</span> <span class="token punctuation">{</span>
    <span class="token comment">// プロトコル定義</span>
<span class="token punctuation">}</span>

<span class="token attribute atrule">@available</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">,</span> unavailable<span class="token punctuation">,</span> renamed<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;MyRenamedProtocol&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">typealias</span> <span class="token class-name">MyProtocol</span> <span class="token operator">=</span> <span class="token class-name">MyRenamedProtocol</span>
</code></pre>
<p>1 つの宣言に複数の <code>available</code> 属性を適用して、様々なプラットフォームおよび様々なバージョンの Swift のアベイラビリティを指定できます。属性が現在のターゲットと一致しないプラットフォームまたは言語バージョンを指定している場合、<code>available</code> 属性が適用される宣言は無視されます。複数の <code>available</code> 属性を使用する場合、有効なアベイラビリティは、プラットフォームと Swift のアベイラビリティの組み合わせです。</p>
<p><code>available</code> 属性がプラットフォームまたは言語名の引数に加えて <code>introduced</code> 引数を指定するだけの場合は、代わりに次の省略構文を使用できます:</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@available</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token other-directive property">#platform</span> name#<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token other-directive property">#version</span> number#<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token attribute atrule">@available</span><span class="token punctuation">(</span>swift <span class="token operator">&lt;</span><span class="token other-directive property">#version</span> number#<span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre>
<p><code>available</code> 属性の省略構文は、複数のプラットフォームのアベイラビリティを簡潔に表しています。2 つの形式は機能的に同等ですが、可能な限り省略形が推奨されます。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@available</span><span class="token punctuation">(</span>iOS <span class="token number">10.0</span><span class="token punctuation">,</span> macOS <span class="token number">10.12</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token comment">// クラス定義</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Swift バージョン番号を使用してアベイラビリティを指定する <code>available</code> 属性は、宣言のプラットフォームのアベイラビリティを追加で指定することはできません。代わりに、個別の <code>available</code> 属性を使用して、Swift バージョンのアベイラビリティと 1 つ以上のプラットフォームのアベイラビリティを指定します。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@available</span><span class="token punctuation">(</span>swift <span class="token number">3.0</span><span class="token punctuation">.</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token attribute atrule">@available</span><span class="token punctuation">(</span>macOS <span class="token number">10.12</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">struct</span> <span class="token class-name">MyStruct</span> <span class="token punctuation">{</span>
    <span class="token comment">// 構造体定義</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="backdeployed">backDeployed</h3>
<p>この属性を関数、メソッド、<code>subscript</code>、または計算プロパティに適用すると、シンボルを呼び出したりアクセスしたりするプログラムにシンボルの実装のコピーを含めることができます。この属性は、OS に含まれる API のように、プラットフォームの一部として出荷されるシンボルにアノテーションを付けるために使用します。この属性は、シンボルにアクセスするプログラムにその実装のコピーを含めることによって、遡って利用できるシンボルをマークします。実装をコピーすることは<em>クライアントの中に取り込む</em>とも言われます。</p>
<p>この属性は <code>before:</code> 引数を取り、このシンボルを提供するプラットフォームの最初のバージョンを指定します。これらのプラットフォームのバージョンは、<code>available</code> 属性で指定したプラットフォームのバージョンと同じ意味を持ちます。ただし、<code>available</code> 属性とは異なり、リストにアスタリスク(<code>*</code>)を入れて全てのバージョンを参照することはできません。例えば、次のコードを考えてみましょう。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@available</span><span class="token punctuation">(</span>iOS <span class="token number">16</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token attribute atrule">@backDeployed</span><span class="token punctuation">(</span>before<span class="token punctuation">:</span> iOS <span class="token number">17</span><span class="token punctuation">)</span>
<span class="token keyword">func</span> <span class="token function-definition function">someFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
</code></pre>
<p>上記の例では、iOS SDK は iOS17 から <code>someFunction()</code> を提供しています。さらに、SDK はバックデプロイメントを使用して iOS16 で <code>someFunction()</code> を利用できるようにします。</p>
<p>この関数を呼び出すコードをコンパイルするとき、Swift は関数の実装を見つけるために間接的な層を挿入します。コードがこの関数を含む SDK のバージョンを使用して実行される場合、SDK の実装が使用されます。そうでなければ、呼び出し元に含まれるコピーが使用されます。上記の例では、<code>someFunction()</code> を呼び出すと、iOS17 以降で実行される場合は SDK の実装が使用され、iOS16 で実行される場合は、呼び出し元に含まれている <code>someFunction()</code> のコピーが使用されます。</p>
<blockquote>
<p>注意: 呼び出し側の最小デプロイメントターゲットが、シンボルを含むSDKの最初のバージョンと同じかそれ以上の場合、
コンパイラは実行時チェックを最適化してSDKの実装を直接呼び出すことができます。
この場合、バックデプロイされたシンボルに直接アクセスすると
コンパイラはクライアントからシンボルの実装のコピーを省略することもできます。</p>
</blockquote>
<p>以下の条件を満たす関数、メソッド、<code>subscript</code>、および計算プロパティをバックデプロイできます。</p>
<ul>
<li>宣言が <code>public</code> または <code>@usableFromInline</code></li>
<li>クラスのインスタンスメソッドおよびクラスの型メソッドで、そのメソッドが <code>final</code> とマークされかつ <code>@objc</code> とマークされていない</li>
<li>実装が、<a href="attributes.html#inlinable">inlinable</a> で説明されている、インライン化可能な関数の要件を満たしている</li>
</ul>
<h3 id="discardableresult">discardableResult</h3>
<p>この属性を関数またはメソッドの宣言に適用すると、値を返す関数またはメソッドがその結果を使用せずに呼び出されたときのコンパイラの警告を抑制します。</p>
<h3 id="dynamiccallable">dynamicCallable</h3>
<p>この属性をクラス、構造体、列挙型、またはプロトコルに適用すると、型のインスタンスを呼び出し可能な関数として扱います。この型は、<code>dynamicallyCall(withArguments:)</code> メソッド、<code>dynamicallyCall(withKeywordArguments:)</code> メソッド、またはその両方を実装する必要があります。</p>
<p>動的に呼び出し可能な型のインスタンスは、任意の数の引数を取る関数のように呼び出すことができます。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@dynamicCallable</span>
<span class="token keyword">struct</span> <span class="token class-name">TelephoneExchange</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">dynamicallyCall</span><span class="token punctuation">(</span>withArguments phoneNumber<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> phoneNumber <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Get Swift help on forums.swift.org&quot;</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unrecognized number&quot;</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> dial <span class="token operator">=</span> <span class="token class-name">TelephoneExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 動的メソッド呼び出しを使用します</span>
<span class="token function">dial</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">// Get Swift help on forums.swift.org</span>

<span class="token function">dial</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
<span class="token comment">// Unrecognized number</span>

<span class="token comment">// 基になるメソッドを直接呼び出します</span>
dial<span class="token punctuation">.</span><span class="token function">dynamicallyCall</span><span class="token punctuation">(</span>withArguments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
<p><code>dynamicallyCall(withArguments:)</code> メソッドの宣言には、上記の例の <code>[Int]</code> のように、<a href="https://developer.apple.com/documentation/swift/expressiblebyarrayliteral" target="_blank">ExpressibleByArrayLiteral</a>プロトコルに準拠する単一のパラメータが必要です。戻り値の型は任意の型にすることができます。</p>
<p><code>dynamicallyCall(withKeywordArguments:)</code> メソッドを実装する場合は、動的メソッド呼び出しにラベルを含めることができます。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@dynamicCallable</span>
<span class="token keyword">struct</span> <span class="token class-name">Repeater</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">dynamicallyCall</span><span class="token punctuation">(</span>withKeywordArguments pairs<span class="token punctuation">:</span> <span class="token class-name">KeyValuePairs</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> pairs
            <span class="token punctuation">.</span>map <span class="token punctuation">{</span> label<span class="token punctuation">,</span> count <span class="token keyword">in</span>
                <span class="token function">repeatElement</span><span class="token punctuation">(</span>label<span class="token punctuation">,</span> count<span class="token punctuation">:</span> count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span>separator<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot; &quot;</span></span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span>separator<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;\n&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> repeatLabels <span class="token operator">=</span> <span class="token class-name">Repeater</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">repeatLabels</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// a</span>
<span class="token comment">// b b</span>
<span class="token comment">// c c c</span>
<span class="token comment">// b b</span>
<span class="token comment">// a</span>
</code></pre>
<p><code>dynamicallyCall(withKeywordArguments:)</code> メソッドの宣言には、<a href="https://developer.apple.com/documentation/swift/expressiblebydictionaryliteral" target="_blank">ExpressibleByDictionaryLiteral</a>プロトコルに準拠する単一のパラメータが必要で、戻り値の型は任意の型にすることができます。パラメータの<a href="https://developer.apple.com/documentation/swift/expressiblebydictionaryliteral/2294108-key" target="_blank">Key</a>は<a href="https://developer.apple.com/documentation/swift/expressiblebystringliteral" target="_blank">ExpressibleByStringLiteral</a>に準拠する必要があります。前の例では、パラメータの型として<a href="https://developer.apple.com/documentation/swift/keyvaluepairs" target="_blank">KeyValuePairs</a>を使用しているため、呼び出し元は重複するパラメータラベルを含めることができます。つまり、<code>a</code> と <code>b</code> は、<code>repeatLabels</code> の呼び出し時に複数回使用されています。</p>
<p>両方の <code>dynamiclyCall</code> メソッドを実装する場合、メソッド呼び出しにキーワード引数が含まれていると、<code>dynamicallyCall(withKeywordArguments:)</code> が呼び出されます。他の全ての場合、<code>dynamicallyCall(withArguments:)</code> が呼び出されます。</p>
<p>動的に呼び出すことができるインスタンスは、<code>dynamicCall</code> メソッドの実装の 1 つで指定した型と一致する引数と戻り値を使用した場合にのみ呼び出すことができます。次の例の呼び出しは、<code>KeyValuePairs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>String,</span> <span class="token attr-name">String</span><span class="token punctuation">&gt;</span></span></code> を受け取る <code>dynamicallyCall(withArguments:)</code> の実装がないため、コンパイルできません。</p>
<pre class="language-"><code class="lang-swift"><span class="token function">repeatLabels</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;four&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// エラー</span>
</code></pre>
<h3 id="dynamicmemberlookup">dynamicMemberLookup</h3>
<p>この属性をクラス、構造体、列挙型、またはプロトコルに適用すると、実行時にメンバを名前で検索できるようになります。型は <code>subscript(dynamicMember:)</code> を実装する必要があります。</p>
<p>明示的メンバ式では、指定されたメンバに対応する宣言がない場合、式は型の <code>subscript(dynamicMember:)</code> の呼び出しとして解釈され、メンバに関する情報を引数として渡します。サブスクリプトは、KeyPath またはメンバ名のいずれかでパラメータを受け取ることができます。両方のサブスクリプトを実装する場合、KeyPath 引数を取るサブスクリプトが使用されます。</p>
<p><code>subscript(dynamicMember:)</code> の実装は、<a href="https://developer.apple.com/documentation/swift/keypath" target="_blank">KeyPath</a>、<a href="https://developer.apple.com/documentation/swift/writablekeypath" target="_blank">WritableKeyPath</a>、または <a href="https://developer.apple.com/documentation/swift/referencewritablekeypath" target="_blank">ReferenceWritableKeyPath</a>の引数を使用して KeyPath を受け取ることができます。<a href="https://developer.apple.com/documentation/swift/expressiblebystringliteral" target="_blank">ExpressibleByStringLiteral</a>プロトコル(ほとんどの場合、<code>String</code>)に準拠する型の引数を使用して、メンバ名を受け入れることができます。サブスクリプトの戻り値の型は任意の型にすることができます。</p>
<p>メンバ名による動的なメンバ検索を使用して、他の言語のデータを Swift にブリッジする場合など、コンパイル時に型チェックできないデータのラッパ型を作成できます。例えば:</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@dynamicMemberLookup</span>
<span class="token keyword">struct</span> <span class="token class-name">DynamicStruct</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> dictionary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;someDynamicMember&quot;</span></span><span class="token punctuation">:</span> <span class="token number">325</span><span class="token punctuation">,</span>
                      <span class="token string-literal"><span class="token string">&quot;someOtherMember&quot;</span></span><span class="token punctuation">:</span> <span class="token number">787</span><span class="token punctuation">]</span>
    <span class="token keyword">subscript</span><span class="token punctuation">(</span>dynamicMember member<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> dictionary<span class="token punctuation">[</span>member<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token number">1054</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token class-name">DynamicStruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//動的メンバ検索を使用します。</span>
<span class="token keyword">let</span> <span class="token keyword">dynamic</span> <span class="token operator">=</span> s<span class="token punctuation">.</span>someDynamicMember
<span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">dynamic</span><span class="token punctuation">)</span>
<span class="token comment">// 325</span>

<span class="token comment">// 基になるサブスクリプトを直接呼び出します</span>
<span class="token keyword">let</span> equivalent <span class="token operator">=</span> s<span class="token punctuation">[</span>dynamicMember<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;someDynamicMember&quot;</span></span><span class="token punctuation">]</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">dynamic</span> <span class="token operator">==</span> equivalent<span class="token punctuation">)</span>
<span class="token comment">// true</span>
</code></pre>
<p>KeyPath による動的メンバ検索を使用して、コンパイル時の型チェックをサポートする方法でラッパ型を実装できます。例えば:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span> <span class="token keyword">var</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">}</span>

<span class="token attribute atrule">@dynamicMemberLookup</span>
<span class="token keyword">struct</span> <span class="token class-name">PassthroughWrapper</span><span class="token operator">&lt;</span><span class="token class-name">Value</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> value<span class="token punctuation">:</span> <span class="token class-name">Value</span>
    <span class="token keyword">subscript</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>dynamicMember member<span class="token punctuation">:</span> <span class="token class-name">KeyPath</span><span class="token operator">&lt;</span><span class="token class-name">Value</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">T</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> value<span class="token punctuation">[</span>keyPath<span class="token punctuation">:</span> member<span class="token punctuation">]</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">381</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">431</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> wrapper <span class="token operator">=</span> <span class="token class-name">PassthroughWrapper</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> point<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
</code></pre>
<h3 id="freestanding">freestanding</h3>
<p>自立型マクロの宣言に <code>freestanding</code> 属性を適用する。</p>
<h3 id="frozen">frozen</h3>
<p>この属性を構造体または列挙型宣言に適用すると、型に加えることができる変更の種類を制限します。この属性は、ライブラリエボリューションモードでコンパイルする場合にのみ許可されます。ライブラリの将来のバージョンでは、列挙型のケースまたは構造体の格納インスタンスプロパティを追加、削除、または並べ替えて宣言を変更することはできません。これらの変更は nonfrozen 型で許可されますが、frozen 型の ABI 互換性が損なわれます。</p>
<blockquote>
<p>NOTE<br>コンパイラが ライブラリエボリューションモードでない場合、全ての構造体と列挙型は暗黙的に frozen にされ、この属性は無視されます。</p>
</blockquote>
<p>ライブラリエボリューションモードでは、nonfrozen の構造体や列挙型のメンバとやり取りするコードは、ライブラリの将来のバージョンでその型のメンバの一部が追加、削除、または並べ替えられた場合でも、再コンパイルせずに作業を継続できるようにコンパイルされます。コンパイラは、実行時に情報を検索したり、間接層を追加したりするなどの手法を使用して、これを可能にします。構造体または列挙型を frozen でマークすると、パフォーマンスを向上させるためにこの柔軟性が失われます。ライブラリの将来のバージョンでは、型に限定的な変更しか加えることができませんが、コンパイラは、型のメンバとやり取りするコードに追加の最適化を行うことができます。</p>
<p>frozen 型、frozen 構造体の格納プロパティの型、および frozen 列挙ケースの関連値は、public か、<code>usableFromInline</code> 属性がマークされている必要があります。frozen 構造体のプロパティはプロパティオブザーバを持つことができず、格納インスタンスプロパティの初期値を提供する式は、<a href="attributes.html#inlinable">inlinable</a>で説明されているように inlinable 関数と同じ制限に従う必要があります。</p>
<p>コマンドラインでライブラリエボリューションモードを有効にするには、<code>-enable-library-evolution</code> オプションを Swift コンパイラに渡します。Xcode で有効にするには、<a href="https://help.apple.com/xcode/mac/current/#/dev04b3a04ba" target="_blank">Xcode Help</a>の説明に従って、「Build Libraries for Distribution」のビルド設定(<code>BUILD_LIBRARY_FOR_DISTRIBUTION</code>)を Yes に設定します。</p>
<p>frozen 列挙型の switch 文は、<a href="statements.html#switching-over-future-enumeration-cases">Switching Over Future Enumeration Cases(列挙型の将来のケースのスイッチング)</a>で説明されているように、デフォルトのケースを必要としません。frozen 列挙型を切り替えるときに <code>default</code> または <code>@unknown default</code> のケースを含めると、そのコードは実行されないため、警告が生成されます。</p>
<h3 id="gkinspectable">GKInspectable</h3>
<p>この属性を適用して、独自の GameplayKit コンポーネントプロパティを SpriteKit エディタ UI に公開します。この属性を適用すると、<code>objc</code> 属性も暗黙的に追加されます。</p>
<h3 id="inlinable">inlinable</h3>
<p>この属性を関数、メソッド、計算プロパティ、サブスクリプト、convenience イニシャライザ、またはデイニシャライザ宣言に適用すると、モジュールのパブリックインターフェイスの一部としてその宣言の実装を公開します。コンパイラは、inlinable シンボルへの呼び出しを、呼び出し側でシンボルの実装のコピーに置き換えることができます。</p>
<p>inlinable コードは、任意のモジュールで宣言された <code>public</code> シンボルとやり取りし、<code>usableFromInline</code> 属性がマークされた同じモジュールで宣言された <code>internal</code> シンボルとやり取りできます。inline 化したコードは、<code>private</code> シンボルまたは fileprivate シンボルとやり取りできません。</p>
<p>この属性は、関数内にネストされている宣言や、<code>fileprivate</code> または <code>private</code> 宣言には適用できません。inlinable 関数内で定義された関数とクロージャは、この属性をマークすることはできませんが、暗黙的に inlinable です。</p>
<h3 id="main">main</h3>
<p>この属性を構造体、クラス、または列挙型の宣言に適用すると、プログラムフローのトップレベルのエントリポイントが含まれていることを示します。型は、引数をとらずに <code>Void</code> を返す <code>main</code> 型関数を提供する必要があります。例えば:</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@main</span>
<span class="token keyword">struct</span> <span class="token class-name">MyTopLevel</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// トップレベルのコードをここに</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>main</code> 属性の要件を記述する別の方法は、この属性を追加する型が、次の架空のプロトコルに準拠する型と同じ要件を満たさなければならないということです。</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">protocol</span> <span class="token class-name">ProvidesMain</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span>
<span class="token punctuation">}</span>
</code></pre>
<p>実行可能ファイルを作成するためにコンパイルする Swift コードには、<a href="declarations.html#top-level-code">Top-Level Code(トップレベルコード)</a>で説明されているように、ただ 1 つのトップレベルのエントリポイントのみを含めます。</p>
<h3 id="nonobjc">nonobjc</h3>
<p>この属性をメソッド、プロパティ、サブスクリプト、またはイニシャライザ宣言に適用すると、暗黙の <code>objc</code> 属性を抑制します。<code>nonobjc</code> 属性は、Objective-C で宣言を使用することができる場合でも、使用できないようにするようコンパイラに指示します。</p>
<p>この属性を extension に適用すると、<code>objc</code> 属性が明示的にマークされていないその extension の全てのメンバに適用するのと同じ効果があります。</p>
<p><code>nonobjc</code> 属性を使用して、<code>objc</code> 属性がマークされたクラスのブリッジメソッドの循環性を解決し、<code>objc</code> 属性がマークされたクラスのメソッドとイニシャライザのオーバーロードを許可します。</p>
<p><code>nonobjc</code> 属性がマークされたメソッドは、<code>objc</code> 属性がマークされたメソッドをオーバーライドできません。ただし、<code>objc</code> 属性がマークされたメソッドは、<code>nonobjc</code> 属性がマークされたメソッドをオーバーライドできます。同様に、<code>nonobjc</code> 属性がマークされたメソッドは、<code>objc</code> 属性がマークされたメソッドのプロトコル要件を満たすことができません。</p>
<h3 id="nsapplicationmain">NSApplicationMain</h3>
<p>この属性をクラスに適用すると、それがアプリケーションデリゲートだということを示します。この属性を使用することは、<code>NSApplicationMain(_:_:)</code> 関数を呼び出すことと同じです。</p>
<p>この属性を使用しない場合は、次のように <code>NSApplicationMain(_:_:)</code> 関数を呼び出すトップレベルのコードを <code>main.swift</code> ファイルに指定します。</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">import</span> <span class="token class-name">AppKit</span>
<span class="token class-name">NSApplicationMain</span><span class="token punctuation">(</span><span class="token class-name">CommandLine</span><span class="token punctuation">.</span>argc<span class="token punctuation">,</span> <span class="token class-name">CommandLine</span><span class="token punctuation">.</span>unsafeArgv<span class="token punctuation">)</span>
</code></pre>
<p>実行可能ファイルを作成するためにコンパイルする Swift コードには、<a href="declarations.html#top-level-code">Top-Level Code(トップレベルコード)</a>で説明されているように、ただ 1 つのトップレベルのエントリポイントのみを含めます。</p>
<h3 id="nscopying">NSCopying</h3>
<p>この属性をクラスの格納変数プロパティに適用します。この属性により、set は、プロパティ自体の値ではなく、<code>copyWithZone(_:)</code> メソッドによって返されるプロパティの値のコピーと同期されます。プロパティの型は、<code>NSCopying</code> プロトコルに準拠している必要があります。</p>
<p><code>NSCopying</code> 属性は、Objective-C のコピープロパティ属性と同じように動作します。</p>
<h3 id="nsmanaged">NSManaged</h3>
<p>この属性を <code>NSManagedObject</code> を継承するクラスのインスタンスメソッドまたは格納変数プロパティに適用すると、関連付けられたエンティティの記述に基づいて、CoreData が実行時にその実装を動的に提供することを示します。<code>NSManaged</code> 属性がマークされたプロパティの場合、CoreData は実行時にストレージも提供します。この属性を適用すると、<code>objc</code> 属性も暗黙的に追加されます。</p>
<h3 id="objc">objc</h3>
<p>この属性は Objective-C で使用することができる全ての宣言に適用します。例えば、ネストされていないクラス、プロトコル、(整数の Raw Value 型の)非ジェネリック列挙型、クラスのプロパティとメソッド(get と set を含む)、プロトコル、およびオプショナルのプロトコル、イニシャライザ、およびサブスクリプトなど。<code>objc</code> 属性は、Objective-C コードで宣言を使用できることをコンパイラに通知します。</p>
<p>この属性を extension に適用すると、<code>nonobjc</code> 属性が明示的にマークされていないその extension 内の全てのメンバに適用するのと同じ効果があります。</p>
<p>コンパイラは、Objective-C で定義されたクラスのサブクラスに <code>objc</code> 属性を暗黙的に追加します。ただし、サブクラスはジェネリックにはできず、ジェネリッククラスから継承してはなりません。これらの条件を満たすサブクラスに <code>objc</code> 属性を明示的に追加して、下記で説明するように、その Objective-C 名を指定できます。<code>objc</code> 属性がマークされているプロトコルは、<code>objc</code> 属性がマークされていないプロトコルから継承できません。</p>
<p>objc 属性は、次の場合にも暗黙的に追加されます:</p>
<ul>
<li>宣言がサブクラスのオーバーライドで、スーパークラスの宣言に <code>objc</code> 属性がある場合</li>
<li>宣言が <code>objc</code> 属性を持つプロトコルの要件を満たす場合</li>
<li>宣言に、<code>IBAction</code>、<code>IBSegueAction</code>、<code>IBOutlet</code>、<code>IBDesignable</code>、<code>IBInspectable</code>、<code>NSManaged</code>、または <code>GKInspectable</code> 属性がある場合</li>
</ul>
<p><code>objc</code> 属性を列挙型に適用すると、各列挙ケースは、列挙型名とケース名を連結して Objective-C コードに公開されます。ケース名の最初の文字は大文字です。例えば、Swift では <code>Planet</code> 列挙型内の <code>venus</code> という名前のケースは、<code>PlanetVenus</code> という名前のケースとして Objective-C コードに公開されます。</p>
<p><code>objc</code> 属性は、任意で、識別子に単一の属性引数を受け取ります。識別子は、<code>objc</code> 属性が適用されるエンティティの Objective-C に公開される名前を指定します。この引数を使用して、クラス、列挙型、列挙ケース、プロトコル、メソッド、get、set、およびイニシャライザに名前を付けることができます。クラス、プロトコル、または列挙型に Objective-C 名を指定する場合は、<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011210" target="_blank">Programming with Objective-C</a>の<a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html#//apple_ref/doc/uid/TP40011210-CH10-SW1" target="_blank">Conventions</a>で説明されているように、名前に 3 文字のプレフィックスを含めます。下記の例では、<code>ExampleClass</code> の <code>enabled</code> プロパティの get を、プロパティ自体の名前としてではなく、<code>isEnabled</code> として Objective-C コードに公開しています。</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">class</span> <span class="token class-name">ExampleClass</span><span class="token punctuation">:</span> <span class="token class-name">NSObject</span> <span class="token punctuation">{</span>
    <span class="token attribute atrule">@objc</span> <span class="token keyword">var</span> enabled<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token punctuation">{</span>
        <span class="token attribute atrule">@objc</span><span class="token punctuation">(</span>isEnabled<span class="token punctuation">)</span> <span class="token keyword">get</span> <span class="token punctuation">{</span>
            <span class="token comment">// 適切な値を返します</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>詳細については、Swift の <a href="https://developer.apple.com/documentation/swift/imported_c_and_objective-c_apis/importing_swift_into_objective-c" target="_blank">Importing Swift into Objective-C</a>を参照ください。</p>
<blockquote>
<p>NOTE<br><code>objc</code> 属性の引数は、その宣言の実行時名を変更することもできます。<code>NSClassFromString</code> などの Objective-C ランタイムとやり取りする関数を呼び出すとき、およびアプリの <code>Info.plist</code> ファイルでクラス名を指定するときに、実行時名を使用します。引数を渡して名前を指定すると、その名前が Objective-C コードの名前および実行時名として使用されます。引数を省略すると、Objective-C コードで使用される名前は Swift コードの名前と一致し、実行時名は通常の Swift コンパイラの名前修飾規則に従います。</p>
</blockquote>
<h3 id="objcmembers">objcMembers</h3>
<p>この属性をクラス宣言に適用すると、クラスの全ての Objective-C に互換性のあるメンバ、その extension、そのサブクラス、およびそのサブクラスの全ての extension に <code>objc</code> 属性を暗黙的に追加します。</p>
<p>ほとんどのコードでは、代わりに <code>objc</code> 属性を使用して、必要な宣言のみを公開する必要があります。多くの宣言を公開する必要がある場合は、<code>objc</code> 属性を持つ extension でグループ化できます。<code>objcMembers</code> 属性は、Objective-C ランタイムのリフレクション機能を多用するライブラリにとって便利です。必要のないときに <code>objc</code> 属性を適用すると、バイナリサイズが大きくなり、パフォーマンスに悪影響を与える可能性があります。</p>
<h3 id="propertywrapper">propertyWrapper</h3>
<p>この属性をクラス、構造体、または列挙型宣言に適用すると、その型をプロパティラッパとして使用できます。この属性を型に適用すると、型と同じ名前のカスタム属性が作成されます。その新しい属性をクラス、構造体、または列挙型のプロパティに適用して、ラッパ型のインスタンスを介してプロパティへのアクセスをラップします。属性をローカルの格納変数宣言に適用して、変数へのアクセスを同じ方法でラップすることもできます。計算変数、グローバル変数、および定数には、プロパティラッパを使用できません。</p>
<p>ラッパは <code>wrappedValue</code> インスタンスプロパティを定義する必要があります。プロパティの<em>ラップされた値</em>は、このプロパティの get と set が公開する値です。ほとんどの場合、<code>wrappedValue</code> は計算値ですが、代わりに格納値にすることもできます。ラッパは、ラップされた値に必要なストレージを定義および管理します。コンパイラは、ラップされたプロパティの名前の前にアンダースコア(<code>_</code>)を付けることにより、ラッパ型のインスタンスのストレージを合成します。例えば、<code>someProperty</code> のラッパは <code>_someProperty</code> として格納されます。ラッパの合成ストレージのアクセス制御レベルは <code>private</code> です。</p>
<p>プロパティラッパを持つプロパティには、<code>willSet</code> ブロックと <code>didSet</code> ブロックを含めることができますが、コンパイラで合成された <code>get</code> ブロックまたは <code>set</code> ブロックをオーバーライドすることはできません。</p>
<p>Swift は、プロパティラッパを初期化するための 2 つの形式の糖衣構文(シンタックスシュガー)を提供します。ラップされた値の定義で代入構文を使用して、代入の右側にある式を、プロパティラッパのイニシャライザの <code>wrappedValue</code> パラメータとして渡すことができます。属性をプロパティに適用するときに属性に引数を指定することもでき、それらの引数はプロパティラッパのイニシャライザに渡されます。例えば、下記のコードでは、<code>SomeStruct</code> は <code>SomeWrapper</code> が定義する各イニシャライザを呼び出します。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@propertyWrapper</span>
<span class="token keyword">struct</span> <span class="token class-name">SomeWrapper</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wrappedValue<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">var</span> someValue<span class="token punctuation">:</span> <span class="token class-name">Double</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>wrappedValue <span class="token operator">=</span> <span class="token number">100</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>someValue <span class="token operator">=</span> <span class="token number">12.3</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span>wrappedValue<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>wrappedValue <span class="token operator">=</span> wrappedValue
        <span class="token keyword">self</span><span class="token punctuation">.</span>someValue <span class="token operator">=</span> <span class="token number">45.6</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span>wrappedValue value<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> custom<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">self</span><span class="token punctuation">.</span>wrappedValue <span class="token operator">=</span> value
        <span class="token keyword">self</span><span class="token punctuation">.</span>someValue <span class="token operator">=</span> custom
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">SomeStruct</span> <span class="token punctuation">{</span>
    <span class="token comment">// init() を使用します</span>
    <span class="token attribute atrule">@SomeWrapper</span> <span class="token keyword">var</span> a<span class="token punctuation">:</span> <span class="token class-name">Int</span>

    <span class="token comment">// init(wrappedValue:) を使用します</span>
    <span class="token attribute atrule">@SomeWrapper</span> <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token comment">// どちらも init(wrappedValue:custom:) を使用します</span>
    <span class="token attribute atrule">@SomeWrapper</span><span class="token punctuation">(</span>custom<span class="token punctuation">:</span> <span class="token number">98.7</span><span class="token punctuation">)</span> <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">30</span>
    <span class="token attribute atrule">@SomeWrapper</span><span class="token punctuation">(</span>wrappedValue<span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">,</span> custom<span class="token punctuation">:</span> <span class="token number">98.7</span><span class="token punctuation">)</span> <span class="token keyword">var</span> d
<span class="token punctuation">}</span>
</code></pre>
<p>ラップされたプロパティの投影された値は、プロパティラッパが追加機能を公開するために使用できる 2 番目の値です。プロパティラッパ型の作成者は、その投影された値の意味を決定し、投影された値が公開するインターフェイスを定義する責任があります。プロパティラッパから値を投影された値を提供するには、ラッパ型で <code>projectedValue</code> インスタンスプロパティを定義します。コンパイラは、ラップされたプロパティの名前の前にドル記号(<code>$</code>)を付けることにより、投影された値の識別子を合成します。例えば、<code>someProperty</code> の投影された値は <code>$someProperty</code> です。投影された値は、元のラップされたプロパティと同じアクセス制御レベルを持ちます。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@propertyWrapper</span>
<span class="token keyword">struct</span> <span class="token class-name">WrapperWithProjection</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wrappedValue<span class="token punctuation">:</span> <span class="token class-name">Int</span>
    <span class="token keyword">var</span> projectedValue<span class="token punctuation">:</span> <span class="token class-name">SomeProjection</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SomeProjection</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">:</span> <span class="token keyword">self</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">struct</span> <span class="token class-name">SomeProjection</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> wrapper<span class="token punctuation">:</span> <span class="token class-name">WrapperWithProjection</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token class-name">SomeStruct</span> <span class="token punctuation">{</span>
    <span class="token attribute atrule">@WrapperWithProjection</span> <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">123</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token class-name">SomeStruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>x           <span class="token comment">// Int 値</span>
s<span class="token punctuation">.</span>$x          <span class="token comment">// SomeProjection 値</span>
s<span class="token punctuation">.</span>$x<span class="token punctuation">.</span>wrapper  <span class="token comment">// WrapperWithProjection 値</span>
</code></pre>
<h3 id="resultbuilder">resultBuilder</h3>
<p>この属性をクラス、構造体、列挙型に適用して、その型をリザルトビルダとして使用できます。<em>リザルトビルダ</em>は、ネストされたデータ構造を段階的に構築する型です。リザルトビルダを使用して、ネストされたデータ構造を自然で宣言的な方法で作成するためのドメイン固有言語(DSL)を実装します。<code>resultBuilder</code> 属性の使用方法の例については、<a href="../language-guide/advanced-operators.html#result-builders">Result Builders(リザルトビルダ)</a>を参照ください。</p>
<h4 id="result-building-methods">Result-Building Methods</h4>
<p>リザルトビルダは、下記で説明する静的メソッドを実装します。リザルトビルダの全ての機能は静的メソッドを介して公開されるため、その型のインスタンスを初期化することはありません。リザルトビルダは <code>buildBlock(_:)</code> メソッド、または <code>buildPartialBlock(first:)</code> と <code>buildPartialBlock(accumulated:next:)</code> メソッドの両方を実装する必要があります。その他のメソッド（DSL の追加機能を実現するメソッド）はオプションです。リザルトビルダ型の宣言は、実際にはプロトコルへの準拠を含む必要はありません。</p>
<p>静的メソッドの記述では、プレースホルダとして 3 つの型を使用しています。<code>Expression</code> 型は、リザルトビルダの入力の型のプレースホルダで、<code>Component</code> は、部分的な結果の型のプレースホルダで、<code>FinalResult</code> は、リザルトビルダが生成する最終的な結果の型のプレースホルダです。これらの型を、リザルトビルダが使用する実際の型に置き換えます。リザルトビルダメソッドで <code>Expression</code> または <code>FinalResult</code> の型が指定されていない場合、デフォルトで <code>Component</code> と同じになります。</p>
<p>ブロック構築メソッドは次のとおりです:</p>
<ul>
<li><p><code>static func buildBlock(_ components: Component...) -&gt; Component</code>: 部分的な結果の配列を単一の部分的な結果に結合する</p>
</li>
<li><p><code>static func buildPartialBlock(first: Component) -&gt; Component</code>: 最初のコンポーネントから部分的な結果を構築する。このメソッドと <code>buildPartialBlock(accumulated:next:)</code> の両方を実装して、一度に 1 つのコンポーネントを構築するブロックをサポートする。<code>buildBlock(_:)</code> と比較して、この方法は、異なる数の引数を処理する汎用的なオーバーロードの必要性を減らせる</p>
</li>
<li><p><code>static func buildPartialBlock(accumulated: Component, next: Component) -&gt; Component</code>: 蓄積されたコンポーネントと新しいコンポーネントを組み合わせて、部分的な結果を構築する。このメソッドと <code>buildPartialBlock(first:)</code> の両方を実装して、一度に 1 つのコンポーネントを構築するブロックをサポートする。<code>buildBlock(_:)</code> と比較して、このアプローチは、異なる数の引数を処理する汎用的オーバーロードの必要性を減らせる</p>
</li>
</ul>
<p>リザルトビルダは、上記のブロック構築メソッドの 3 つすべてを実装できます。その場合、アベイラビリティによってどのメソッドが呼び出されるかが決まります。デフォルトでは、Swift は <code>buildPartialBlock(first:)</code> と <code>buildPartialBlock(accumulated:next:)</code> のメソッドを呼び出します。Swift が代わりに <code>buildBlock(_:)</code> を呼び出すようにするには、囲んでいる宣言のアベイラビリティが、<code>buildPartialBlock(first:)</code> と <code>buildPartialBlock(accumulated:next:)</code> に書いたアベイラビリティよりも広範囲になるようにマークしてください。</p>
<p>追加の結果構築メソッドは以下の通りです:</p>
<ul>
<li><p><code>static func buildOptional(_ component: Component?) -&gt; Component</code>: <code>nil</code> になる可能性のある部分的な結果から部分的な結果を構築する。このメソッドを実装して、<code>else</code> 句を含まない <code>if</code> 文をサポートする</p>
</li>
<li><p><code>static func buildEither(first: Component) -&gt; Component</code>: 条件によって値が変化する部分的な結果を作成する。このメソッドと <code>buildEither(second:)</code> の両方を実装して、<code>switch</code> 文と <code>else</code> 句を含む <code>if</code> 文をサポートする</p>
</li>
<li><p><code>static func buildEither(second: Component) -&gt; Component</code>: 条件によって値が変化する部分的な結果を作成する。このメソッドと <code>buildEither(first:)</code> の両方を実装して、<code>switch</code> 文と <code>else</code> 句を含む <code>if</code> 文をサポートする</p>
</li>
<li><p><code>static func buildArray(_ components: [Component]) -&gt; Component</code>: 部分的な結果の配列から部分的な結果を構築する。このメソッドを実装して、ループをサポートする</p>
</li>
<li><p><code>static func buildExpression(_ expression: Expression) -&gt; Component</code>: 式から部分的な結果を作成する。このメソッドを実装して、前処理(例えば、式を内部型に変換する)を実行したり、使用側で型推論のための追加情報を提供したりできる</p>
</li>
<li><p><code>static func buildFinalResult(_ component: Component) -&gt; FinalResult</code>: 部分的な結果から最終結果を作成する。このメソッドは、部分結果と最終結果で異なる型を使用するリザルトビルダの一部として実装したり、結果を返す前に結果に対して後処理を実行したりできる</p>
</li>
<li><code>static func buildLimitedAvailability(_ component: Component) -&gt; Component</code>: アベイラビリティチェックを実行するコンパイラ制御文の外部で型情報を伝播または消去する部分的な結果を作成する。これを使用して、条件分岐間で異なる型情報を消去できる</li>
</ul>
<p>例えば、下記のコードは、整数の配列を作成するシンプルなリザルトビルダを定義しています。このコードは、<code>Component</code> と <code>Expression</code> をタイプエイリアスとして定義し、下記の例を上記のメソッドのリストに簡単に一致させることができます。</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@resultBuilder</span>
<span class="token keyword">struct</span> <span class="token class-name">ArrayBuilder</span> <span class="token punctuation">{</span>
    <span class="token keyword">typealias</span> <span class="token class-name">Component</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span>
    <span class="token keyword">typealias</span> <span class="token class-name">Expression</span> <span class="token operator">=</span> <span class="token class-name">Int</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildExpression</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> element<span class="token punctuation">:</span> <span class="token class-name">Expression</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>element<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildOptional</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> component<span class="token punctuation">:</span> <span class="token class-name">Component</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
        <span class="token keyword">guard</span> <span class="token keyword">let</span> component <span class="token operator">=</span> component <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
        <span class="token keyword">return</span> component
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildEither</span><span class="token punctuation">(</span>first component<span class="token punctuation">:</span> <span class="token class-name">Component</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> component
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildEither</span><span class="token punctuation">(</span>second component<span class="token punctuation">:</span> <span class="token class-name">Component</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> component
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildArray</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> components<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Component</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>components<span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildBlock</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> components<span class="token punctuation">:</span> <span class="token class-name">Component</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>components<span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="result-transformations">Result Transformations</h4>
<p>次の構文変換は、リザルトビルダ構文を使用するコードを、リザルトビルダ型の静的メソッドを呼び出すコードに変換するために再帰的に適用されます。</p>
<ul>
<li>リザルトビルダに <code>buildExpression(_:)</code> メソッドがある場合、各式はそのメソッドの呼び出しになります。この変換は常に最初に行われます。例えば、次の宣言は同等です:</li>
</ul>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@ArrayBuilder</span> <span class="token keyword">var</span> builderNumber<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> manualNumber <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre>
<ul>
<li>代入文は式のように変換されますが、<code>()</code> に評価されると解釈されます。代入を具体的に処理するために <code>()</code> 型の引数を取る <code>buildExpression(_:)</code> のオーバーロードを定義できます</li>
<li>アベイラビリティ条件をチェックする分岐文は、<code>buildLimitedAvailability(_:)</code> メソッドの呼び出しになります。この変換は、<code>buildEither(first:)</code>、<code>buildEither(second:)</code>、または <code>buildOptional(_:)</code> の呼び出しに変換される前に行われます。<code>buildLimitedAvailability(_:)</code> メソッドを使用して、取得する分岐に応じて変化する型情報を消去します。例えば、下記の <code>buildEither(first:)</code> メソッドと <code>buildEither(second:)</code> メソッドは、両方の分岐に関する型情報をキャプチャするジェネリック型を使用します</li>
</ul>
<pre class="language-"><code class="lang-swift"><span class="token keyword">protocol</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span>
<span class="token punctuation">}</span>
<span class="token keyword">struct</span> <span class="token class-name">Text</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> content<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> content <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">struct</span> <span class="token class-name">Line</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token operator">&gt;</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> elements<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">D</span><span class="token punctuation">]</span>
    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> elements<span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token short-argument">$0</span><span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">joined</span><span class="token punctuation">(</span>separator<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">struct</span> <span class="token class-name">DrawEither</span><span class="token operator">&lt;</span><span class="token class-name">First</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token punctuation">,</span> <span class="token class-name">Second</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token operator">&gt;</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token class-name">Drawable</span>
    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> content<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute atrule">@resultBuilder</span>
<span class="token keyword">struct</span> <span class="token class-name">DrawingBuilder</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildBlock</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> components<span class="token punctuation">:</span> <span class="token class-name">D</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Line</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>elements<span class="token punctuation">:</span> components<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildEither</span><span class="token operator">&lt;</span><span class="token class-name">First</span><span class="token punctuation">,</span> <span class="token class-name">Second</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> <span class="token class-name">First</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span> <span class="token class-name">DrawEither</span><span class="token operator">&lt;</span><span class="token class-name">First</span><span class="token punctuation">,</span> <span class="token class-name">Second</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">DrawEither</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> first<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildEither</span><span class="token operator">&lt;</span><span class="token class-name">First</span><span class="token punctuation">,</span> <span class="token class-name">Second</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>second<span class="token punctuation">:</span> <span class="token class-name">Second</span><span class="token punctuation">)</span>
        <span class="token operator">-&gt;</span> <span class="token class-name">DrawEither</span><span class="token operator">&lt;</span><span class="token class-name">First</span><span class="token punctuation">,</span> <span class="token class-name">Second</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">DrawEither</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> second<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ただし、このアプローチでは、アベイラビリティチェックがあるコードで問題が発生します:</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@available</span><span class="token punctuation">(</span>macOS <span class="token number">99</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">struct</span> <span class="token class-name">FutureText</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token class-name">String</span>
    <span class="token keyword">init</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> content<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content <span class="token punctuation">}</span>
    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> content <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token attribute atrule">@DrawingBuilder</span> <span class="token keyword">var</span> brokenDrawing<span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token other-directive property">#available</span><span class="token punctuation">(</span>macOS <span class="token number">99</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FutureText</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Inside.future&quot;</span></span><span class="token punctuation">)</span>  <span class="token comment">// Problem</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Inside.present&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// brokenDrawing の型は Line&lt;DrawEither&lt;Line&lt;FutureText&gt;, Line&lt;Text&gt;&gt;&gt;</span>
</code></pre>
<p>上記のコードでは、<code>FutureText</code> は <code>DrawEither</code> ジェネリック型の 1 つのため、<code>brokenDrawing</code> の型の一部として使用されています。これにより、<code>FutureText</code> が実行時に使用できない場合、その型が明示的に使用されていない場合でも、プログラムがクラッシュする可能性があります。</p>
<p>この問題を解決するには、<code>buildLimitedAvailability(_:)</code> メソッドを実装して型情報を消去します。例えば、下記のコードは、アベイラビリティチェックから <code>AnyDrawable</code> 値を作成します。</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">struct</span> <span class="token class-name">AnyDrawable</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> content<span class="token punctuation">:</span> <span class="token class-name">Drawable</span>
    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> content<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">extension</span> <span class="token class-name">DrawingBuilder</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildLimitedAvailability</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> content<span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">AnyDrawable</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">AnyDrawable</span><span class="token punctuation">(</span>content<span class="token punctuation">:</span> content<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute atrule">@DrawingBuilder</span> <span class="token keyword">var</span> typeErasedDrawing<span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token other-directive property">#available</span><span class="token punctuation">(</span>macOS <span class="token number">99</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FutureText</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Inside.future&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Inside.present&quot;</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// typeErasedDrawing の型は Line&lt;DrawEither&lt;AnyDrawable, Line&lt;Text&gt;&gt;&gt;</span>
</code></pre>
<ul>
<li>分岐文は、<code>buildEither(first:)</code> メソッドと <code>buildEither(second:)</code> メソッドへの一連のネストされた呼び出しになります。文の条件とケースはバイナリツリーのリーフノードにマッピングされ、文はルートノードからそのリーフノードへのパスをたどる <code>buildEither</code> メソッドへのネストされた呼び出しになります</li>
</ul>
<p>例えば、3 つのケースを持つ <code>switch</code> 文を作成する場合、コンパイラは 3 つのリーフノードを持つバイナリツリーを使用します。同様に、ルートノードから 2 番目のケースへのパスは「2 番目の子」の「最初の子」のため、そのケースは <code>buildEither(first: buildEither(second: ... ))</code> のようなネストされた呼び出しになります。次の宣言は同等です:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">let</span> someNumber <span class="token operator">=</span> <span class="token number">19</span>
<span class="token attribute atrule">@ArrayBuilder</span> <span class="token keyword">var</span> builderConditional<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> someNumber <span class="token operator">&lt;</span> <span class="token number">12</span> <span class="token punctuation">{</span>
        <span class="token number">31</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> someNumber <span class="token operator">==</span> <span class="token number">19</span> <span class="token punctuation">{</span>
        <span class="token number">32</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token number">33</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> manualConditional<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span>
<span class="token keyword">if</span> someNumber <span class="token operator">&lt;</span> <span class="token number">12</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> partialResult <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">31</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> outerPartialResult <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildEither</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> partialResult<span class="token punctuation">)</span>
    manualConditional <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildEither</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> outerPartialResult<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> someNumber <span class="token operator">==</span> <span class="token number">19</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> partialResult <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> outerPartialResult <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildEither</span><span class="token punctuation">(</span>second<span class="token punctuation">:</span> partialResult<span class="token punctuation">)</span>
    manualConditional <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildEither</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> outerPartialResult<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> partialResult <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span>
    manualConditional <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildEither</span><span class="token punctuation">(</span>second<span class="token punctuation">:</span> partialResult<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
<li><code>else</code> 句のない <code>if</code> 文のように、値を生成しない可能性のある分岐文は、<code>buildOptional(_:)</code> の呼び出しになります。<code>if</code> 文の条件が満たされると、そのコードブロックが変換され、引数として渡されます。それ以外の場合、<code>buildOptional(_:)</code> は引数として <code>nil</code> を使用して呼び出されます。例えば、次の宣言は同等です:</li>
</ul>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@ArrayBuilder</span> <span class="token keyword">var</span> builderOptional<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>someNumber <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> partialResult<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>someNumber <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">{</span>
    partialResult <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> manualOptional <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildOptional</span><span class="token punctuation">(</span>partialResult<span class="token punctuation">)</span>
</code></pre>
<p>リザルトビルダーが <code>buildPartialBlock(first:)</code> メソッドと <code>buildPartialBlock(accumulated:next:)</code> メソッドを実装している場合、コードブロックまたは <code>do</code> 文はこれらのメソッドを呼び出します。ブロック内の最初の宣言は <code>buildPartialBlock(first:)</code> メソッドの引数に変換され、残りの宣言は <code>buildPartialBlock(accumulated:next:)</code> メソッドのネストされた呼び出しになります。例えば、以下の宣言は等しいです:</p>
<pre class="language-"><code class="lang-swift"><span class="token keyword">struct</span> <span class="token class-name">DrawBoth</span><span class="token operator">&lt;</span><span class="token class-name">First</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token punctuation">,</span> <span class="token class-name">Second</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token operator">&gt;</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> first<span class="token punctuation">:</span> <span class="token class-name">First</span>
    <span class="token keyword">var</span> second<span class="token punctuation">:</span> <span class="token class-name">Second</span>
    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> first<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> second<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute atrule">@resultBuilder</span>
<span class="token keyword">struct</span> <span class="token class-name">DrawingPartialBlockBuilder</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildPartialBlock</span><span class="token operator">&lt;</span><span class="token class-name">D</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> <span class="token class-name">D</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">D</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> first
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">func</span> <span class="token function-definition function">buildPartialBlock</span><span class="token operator">&lt;</span><span class="token class-name">Accumulated</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token punctuation">,</span> <span class="token class-name">Next</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
        accumulated<span class="token punctuation">:</span> <span class="token class-name">Accumulated</span><span class="token punctuation">,</span> next<span class="token punctuation">:</span> <span class="token class-name">Next</span>
    <span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">DrawBoth</span><span class="token operator">&lt;</span><span class="token class-name">Accumulated</span><span class="token punctuation">,</span> <span class="token class-name">Next</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">DrawBoth</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> accumulated<span class="token punctuation">,</span> second<span class="token punctuation">:</span> next<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token attribute atrule">@DrawingPartialBlockBuilder</span> <span class="token keyword">var</span> builderBlock<span class="token punctuation">:</span> <span class="token keyword">some</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span>
    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;First&quot;</span></span><span class="token punctuation">)</span>
    <span class="token class-name">Line</span><span class="token punctuation">(</span>elements<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Second&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Third&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Last&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> partialResult1 <span class="token operator">=</span> <span class="token class-name">DrawingPartialBlockBuilder</span><span class="token punctuation">.</span><span class="token function">buildPartialBlock</span><span class="token punctuation">(</span>first<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;first&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> partialResult2 <span class="token operator">=</span> <span class="token class-name">DrawingPartialBlockBuilder</span><span class="token punctuation">.</span><span class="token function">buildPartialBlock</span><span class="token punctuation">(</span>
    accumulated<span class="token punctuation">:</span> partialResult1<span class="token punctuation">,</span>
    next<span class="token punctuation">:</span> <span class="token class-name">Line</span><span class="token punctuation">(</span>elements<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Second&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Third&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">let</span> manualResult <span class="token operator">=</span> <span class="token class-name">DrawingPartialBlockBuilder</span><span class="token punctuation">.</span><span class="token function">buildPartialBlock</span><span class="token punctuation">(</span>
    accumulated<span class="token punctuation">:</span> partialResult2<span class="token punctuation">,</span>
    next<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Last&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre>
<p>そうでなければ、コードブロックまたは <code>do</code> 文は、<code>buildBlock(_:)</code> メソッドの呼び出しになります。ブロック内の各文は一度に 1 つずつ変換され、<code>buildBlock(_:)</code> メソッドの引数になります。例えば、次の宣言は同等です:</p>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@ArrayBuilder</span> <span class="token keyword">var</span> builderBlock<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token number">100</span>
    <span class="token number">200</span>
    <span class="token number">300</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> manualBlock <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildBlock</span><span class="token punctuation">(</span>
    <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre>
<ul>
<li><code>for</code> ループは一時変数、<code>for</code> ループ、<code>buildArray(_:)</code> メソッドの呼び出し、に分かれます。新しい <code>for</code> ループはシーケンスを繰り返し処理し、それぞれの部分的な結果をその配列に追加します。一時配列は、<code>buildArray(_:)</code> メソッドの引数として渡されます。例えば、次の宣言は同等です:</li>
</ul>
<pre class="language-"><code class="lang-swift"><span class="token attribute atrule">@ArrayBuilder</span> <span class="token keyword">var</span> builderArray<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">5</span><span class="token operator">...</span><span class="token number">7</span> <span class="token punctuation">{</span>
        <span class="token number">100</span> <span class="token operator">+</span> i
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> temporary<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">5</span><span class="token operator">...</span><span class="token number">7</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> partialResult <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildExpression</span><span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">+</span> i<span class="token punctuation">)</span>
    temporary<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>partialResult<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> manualArray <span class="token operator">=</span> <span class="token class-name">ArrayBuilder</span><span class="token punctuation">.</span><span class="token function">buildArray</span><span class="token punctuation">(</span>temporary<span class="token punctuation">)</span>
</code></pre>
<ul>
<li>リザルトビルダに <code>buildFinalResult(_:)</code> メソッドがある場合、最終結果はそのメソッドの呼び出しになります。この変換は常に最後に行われます</li>
</ul>
<p>変換の動作は一時変数の観点から説明されていますが、リザルトビルダを使用しても、コードの残りの部分から見える新しい宣言は実際には作成されません。</p>
<p>リザルトビルダが変換するコードで、<code>break</code>、<code>continue</code>、<code>defer</code>、<code>guard</code>、<code>return</code>、<code>while</code>、または <code>do-catch</code> を使用することはできません。</p>
<p>変換プロセスでは、コード内の宣言は変更されません。これにより、一時的な定数と変数を使用して、1 つずつ式を構築します。また、<code>throw</code> 文、コンパイル時の診断文、または <code>return</code> 文を含むクロージャも変更しません。</p>
<p>可能な限り、変換は合体します。例えば、式 <code>4 + 5 * 6</code> は、その関数への複数の呼び出しではなく、<code>buildExpression(4 + 5 * 6)</code> になります。同様に、ネストされた分岐文は、<code>buildEither</code> メソッドへの呼び出しの単一のバイナリツリーになります。</p>
<h4 id="custom-result-builder-attributes">Custom Result-Builder Attributes</h4>
<p>リザルトビルダ型を作成すると、同じ名前のカスタム属性が作成されます。その属性は、次の場所に適用できます:</p>
<ul>
<li>関数宣言では、リザルトビルダは関数の本文を作成します</li>
<li>get を含む変数またはサブスクリプトの宣言で、リザルトビルダは get の本文を作成します</li>
<li>関数宣言のパラメータでは、リザルトビルダは対応する引数として渡されるクロージャの本文を作成します</li>
</ul>
<p>resultBuilder 属性を適用しても、ABI の互換性には影響しません。リザルトビルダ属性をパラメータに適用すると、その属性が関数のインターフェースの一部になり、ソースの互換性に影響を与える可能性があります。</p>
<h3 id="requiresstoredpropertyinits">requires_stored_property_inits</h3>
<p>この属性をクラス宣言に適用すると、クラス内に格納されている全てのプロパティに、定義の一部としてデフォルト値を提供するように要求します。この属性は、<code>NSManagedObject</code> を継承する全てのクラスに対して推論されます。</p>
<h3 id="testable">testable</h3>
<p>モジュールのコードのテストを簡単にするために、この属性をインポート宣言に適用すると、アクセス制御へ変更を加えて、そのモジュールをインポートします。インポートされたモジュール内の <code>internal</code> 修飾子がマークされているエンティティは、<code>public</code> 修飾子で宣言されているかのようにインポートされます。<code>internal</code> または <code>public</code> 修飾子がマークされたクラスおよびクラスメンバは、<code>open</code> 修飾子で宣言されたかのようにインポートされます。インポートされたモジュールは、テストを有効にしてコンパイルする必要があります。</p>
<h3 id="uiapplicationmain">UIApplicationMain</h3>
<p>この属性をクラスに適用して、それがアプリケーションデリゲートだということを示します。この属性を使用することは、<code>UIApplicationMain</code> 関数を呼び出し、このクラスの名前をデリゲートクラスの名前として渡すことと同じです。</p>
<p>この属性を使用しない場合は、<a href="https://developer.apple.com/documentation/uikit/1622933-uiapplicationmain" target="_blank">UIApplicationMain(<em>:</em>:<em>:</em>:)</a>関数を呼び出すトップレベルのコードを <code>main.swift</code> ファイルに指定します。例えば、アプリが <code>UIApplication</code> の独自のサブクラスをメインクラスとして使用している場合、この属性を使用する代わりに <code>UIApplicationMain(_:_:_:_:)</code> 関数を呼び出します。</p>
<p>実行可能ファイルを作成するためにコンパイルする Swift コードには、<a href="declarations.html#top-level-code">Top-Level Code(トップレベルコード)</a>で説明されているように、ただ 1 つのトップレベルのエントリポイントのみを含めます。</p>
<h3 id="unchecked"><a id="unchecked">unchecked</a></h3>
<p>型宣言に適用されたプロトコルのリストの一部としてこの属性をあるプロトコルの型に適用した場合、そのプロトコルの要件の適用をオフにします。</p>
<p>サポートされているプロトコルは<a href="https://developer.apple.com/documentation/swift/sendable" target="_blank"><code>Sendable</code></a>のみです。</p>
<h3 id="usablefrominline">usableFromInline</h3>
<p>この属性を関数、メソッド、計算プロパティ、サブスクリプト、イニシャライザ、またはデイニシャライザの宣言に適用すると、宣言と同じモジュールで定義されているインライン化されたコードでそのシンボルを使用できるようにします。宣言には、<code>internal</code> 修飾子が必要です。<code>usedFromInline</code> がマークされた構造体またはクラスは、そのプロパティに <code>public</code> または <code>usableFromInline</code> の型のみを使用できます。<code>usedFromInline</code> がマークされた列挙型は、そのケースの Raw Value と関連値に対して、<code>public</code> または <code>usableFromInline</code> の型のみを使用できます。</p>
<p><code>public</code> 修飾子と同様に、この属性はモジュールの公開インターフェイスの一部として宣言が公開されます。<code>public</code> とは異なり、コンパイラは、宣言のシンボルがエクスポートされている場合でも、<code>usableFromInline</code> がマークされた宣言をモジュール外のコードで参照することを許可しません。ただし、モジュール外のコードは、ランタイム時の動作を使用して宣言のシンボルとやり取りできることもあります。</p>
<p><code>inlinable</code> 属性がマークされた宣言は、inlinable コードから暗黙的に使用できます。<code>inlinable</code> または <code>usableFromInline</code> のいずれかを <code>internal</code> 宣言に適用できますが、両方の属性を適用するとエラーです。</p>
<h3 id="warnunqualifiedaccess">warn_unqualified_access</h3>
<p>この属性をトップレベルの関数、インスタンスメソッド、またはクラスまたは静的メソッドに適用すると、その関数またはメソッドがモジュール名、型名、インスタンス変数または定数などを修飾子なしで使用された場合に警告を出力します。この属性を使用して、同じスコープからアクセスできる同じ名前の関数間のあいまいさを回避できます。</p>
<p>例えば、Swift 標準ライブラリには、トップレベルの<a href="https://developer.apple.com/documentation/swift/1538339-min/" target="_blank">min(<em>:</em>:)</a>関数と、同等の要素を持つ <code>Sequence</code> の <code>min()</code> メソッドの両方が含まれています。<code>Sequence</code> メソッドは <code>warn_unqualified_access</code> 属性で宣言されており、<code>Sequence</code> extension 内からどちらかを使用しようとするときの混乱を減らすのに役立ちます。</p>
<h3 id="declaration-attributes-used-by-interface-builder">Declaration Attributes Used by Interface Builder</h3>
<p>Interface Builder 属性は、Xcode と同期するために InterfaceBuilder によって使用される宣言属性です。Swift は、次の Interface Builder 属性を提供します: <code>IBAction</code>、<code>IBSegueAction</code>、<code>IBOutlet</code>、<code>IBDesignable</code>、および <code>IBInspectable</code>。これらの属性は、Objective-C の対応する属性と概念的に同じです。</p>
<p><code>IBOutlet</code> 属性と <code>IBInspectable</code> 属性はクラスのプロパティ宣言に適用できます。<code>IBAction</code> 属性と <code>IBSegueAction</code> 属性はクラスのメソッド宣言に適用でき、<code>IBDesignable</code> 属性はクラス宣言に適用できます。</p>
<p><code>IBAction</code>、<code>IBSegueAction</code>、<code>IBOutlet</code>、<code>IBDesignable</code>、または <code>IBInspectable</code> 属性を適用すると、<code>objc</code> 属性も暗黙的に追加されます。</p>
<h2 id="型属性type-attributes">型属性(Type Attributes)</h2>
<p>型属性は型にのみ適用できます。</p>
<h3 id="autoclosure">autoclosure</h3>
<p>この属性を適用すると、引数のないクロージャで式を自動的にラップすることにより、式の評価を遅らせます。関数またはメソッド宣言のパラメータに、引数を受け取らず式の型の値を返す関数型を適用できます。<code>autoclosure</code> 属性の使用方法の例については、<a href="../language-guide/closures.html#autoclosures">AutoClosures(自動クロージャ)</a>と<a href="types.html#types-function-type">Function Type(関数型)</a>を参照ください。</p>
<h3 id="convention">convention</h3>
<p>呼び出し規約を示すために、この属性を関数の型に適用します。</p>
<p><code>convention</code> 属性は、常に次のいずれかの引数で表示されます:</p>
<ul>
<li><code>swift</code> 引数は、Swift 関数の参照を示します。これは、Swift の関数値の標準的な呼び出し規約です</li>
<li><code>block</code> 引数は、Objective-C 互換のブロック参照を示します。関数値は、ブロックオブジェクトへの参照として表されます。ブロックオブジェクトは、その呼び出し関数をオブジェクト内に埋め込む <code>id</code> 互換の Objective-C オブジェクトへの参照です。呼び出し関数は C 言語の呼び出し規約を使用します</li>
<li><code>c</code> 引数は、C 言語関数の参照を示します。関数値はコンテキストを持たず、C 言語の呼び出し規約を使用します</li>
</ul>
<p>いくつかの例外を除いて、他の呼び出し規約の関数が必要な場合は、任意の呼び出し規約の関数を使用できます。非ジェネリックグローバル関数、ローカル変数をキャプチャしないローカル関数、またはローカル変数をキャプチャしないクロージャは、C 言語の呼び出し規約に変換できます。他の Swift 関数は C 言語の呼び出し規約に変換できません。Objective-C の block 呼び出し規約を持つ関数は、C 言語の呼び出し規約に変換できません。</p>
<h3 id="escaping">escaping</h3>
<p>この属性を関数またはメソッド宣言のパラメータの型に適用すると、パラメータの値を後で実行するために保持されることがあることを示します。これは、値が呼び出し側の生存期間を超えて存続できることを意味します。<code>escaping</code> 属性を持つ関数型パラメータは、プロパティまたはメソッドに対して <code>self</code> を明示的に使用する必要があります。<code>escaping</code> 属性の使用方法の例については、<a href="../language-guide/closures.html#escaping-closures">Escaping Closures(エスケープクロージャ)</a>を参照ください。</p>
<h3 id="sendable"><a id="sendable">Sendable</a></h3>
<p>この属性を関数の型に適用して、関数またはクロージャが <code>Sendable</code> なことを示します。この属性を関数型に適用することは、非関数型を <a href="https://developer.apple.com/documentation/swift/sendable" target="_blank"><code>Sendable</code></a> プロトコルに準拠させることと同じ意味です。</p>
<p>この属性は、関数またはクロージャが <code>Sendable</code> の値を期待するコンテキストで使用され、 <code>Sendable</code> の要件を満たしている場合、その関数またはクロージャは <code>Sendable</code> だと推論されます。</p>
<p><code>Sendable</code> な関数型は、対応する <code>Sendable</code> ではない関数型のサブタイプです。</p>
<h2 id="switch-case-attributes-switch-ケース属性">Switch Case Attributes (Switch ケース属性)</h2>
<p>switch の case 属性は、switch 文のケースにのみ適用できます。</p>
<h3 id="unknown">unknown</h3>
<p>この属性を switch ケースに適用すると、コードのコンパイル時にわかっているどの列挙ケースとも一致することがない可能性を示します。<code>unknown</code> 属性の使用方法の例については、<a href="statements.html#switching-over-future-enumeration-cases">Switching Over Future Enumeration Cases(列挙型の将来のケースのスイッチング)</a>を参照ください。</p>
<blockquote>
<p>Grammar of an attribute:</p>
<p><em>attribute</em> → <strong><code>@</code></strong> <em>attribute-name</em> <em>attribute-argument-clause</em><em>?</em> \
<em>attribute-name</em> → <em>identifier</em> \
<em>attribute-argument-clause</em> → <strong><code>(</code></strong> <em>balanced-tokens</em><em>?</em> <strong><code>)</code></strong> \
<em>attributes</em> → <em>attribute</em> <em>attributes</em><em>?</em></p>
<p><em>balanced-tokens</em> → <em>balanced-token</em> <em>balanced-tokens</em><em>?</em> \
<em>balanced-token</em> → <strong><code>(</code></strong> <em>balanced-tokens</em><em>?</em> <strong><code>)</code></strong> \
<em>balanced-token</em> → <strong><code>[</code></strong> <em>balanced-tokens</em><em>?</em> <strong><code>]</code></strong> \
<em>balanced-token</em> → <strong><code>{</code></strong> <em>balanced-tokens</em><em>?</em> <strong><code>}</code></strong> \
<em>balanced-token</em> → 任意の識別子、キーワード、リテラル、または演算子 \
<em>balanced-token</em> → <strong><code>(</code></strong>,  <strong><code>)</code></strong>,  <strong><code>[</code></strong>,  <strong><code>]</code></strong>,  <strong><code>{</code></strong>, または  <strong><code>}</code></strong> を除く任意の句読点</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="declarations.html" class="navigation navigation-prev " aria-label="Previous page: 宣言(Declarations)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="patterns.html" class="navigation navigation-next " aria-label="Next page: パターン(Patterns)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"属性(Attributes)","level":"4.7","depth":1,"next":{"title":"パターン(Patterns)","level":"4.8","depth":1,"path":"language-reference/patterns.md","ref":"language-reference/patterns.md","articles":[]},"previous":{"title":"宣言(Declarations)","level":"4.6","depth":1,"path":"language-reference/declarations.md","ref":"language-reference/declarations.md","articles":[]},"dir":"ltr"},"config":{"plugins":["back-to-top-button","collapsible-chapters","copy-code-button","custom-favicon","edit-link","expand-active-chapter","-highlight","hide-published-with","insert-logo","intopic-toc","katex","prism"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"prism":{},"intopic-toc":{"selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5, .markdown-section h6","mode":"nested","maxDepth":6,"isCollapsed":true,"isScrollspyActive":true,"visible":true,"label":"In this article"},"search":{},"collapsible-chapters":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"hide-published-with":{},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"favicon":"assets/favicon.ico","back-to-top-button":{},"custom-favicon":{},"expand-active-chapter":{},"copy-code-button":{},"edit-link":{"label":"このページを編集","base":"https://github.com/stzn/the-swift-programming-language-jp/edit/master"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"insert-logo":{"url":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAL8AAAA7CAYAAAAqy1vIAAAABmJLR0QA/wD/AP+gvaeTAAANsElEQVR42u1dC3QU1RkeEaXYYjzWFkQp4gF6BCsoJbsJr6BSCwgkGxKgyJtKRFAKQhT0gPIStcqjFEFQQykFpSCPKhU5FgFBwkPlodACEh6FQjbZ7Oa1r9v/n50Nm7v3zmNnNvvIfOd8Jzk7d/6dnfvdO//973/vCIIKlNqsD5VmWqeVZln/5siy7i7NSjsN/9uBfiCJAfG7LwAPwrVtgL/5jsy0VCIINwgmTOgFmSU0KMm0jgRhnYiRwCMhXmseychoaNagiYjgyLa0AREdSCDRU7QcKclK7WDWpAlNKLFZeoKAShNX+DV0Omypfc0aNaFO+NlpD6JokkD4QbqxMZs1a0IW9pxOKSCW80kk/CCvuXI6NzNr2AS/18+0Lk5C4YssybKuMWvYBBNX+3dpji5Csoofac9Kv9+saRPh0Z1M68yYijM7nZRNGBTt3n+RWdMmwgDiOBTrnrli2aukauNqUjqwa3S+w2Y9U8e39UYghlvzgLOBfwKuBa4Azgc+C+wCbGQqMEYo7m25FcThjblrYksjnmOHiffkUVL2+wFR+Y7iAZ1b1MEtRUHjGKMMSFSwErgZ+Bsh+WaocbIxH3gU+D1wHvBHEdj5MTANmAMcDbQBewB/pq/Xz7R0ihe/3DllBCF+H/GXXCPO50ZFwb2yPhrFisYxxZcqBc/j18BfJ5H45zJ+Y4GG81OBW4Fezv0ary/KY0vL0iXYqSDSgV0ME6j7i38ShL+ygrhmTjTY708bHaVKngSs1in8ID3A6UkgfHyKlTB+nx94m4rzhwPdCvdKp/hBEHoE5RicQao+WGWYr142cTAo3x9oANVV0AAmGCd+m2VKFCo53yDR03wtwcV/k0yHoOR+tgdWqbhH+sTvsFknqhJPbjdSNqYfu/f/wzDi3rtTLGOESD3fFJIg/OUusUEYI37rLIMreLBMxeCj+mPgOOCDwKbAn0h+Kg6ExwC3SD09z8bIBG8AWzmunRJWcu5HOfAQcIdk5wnqvHaceuC5PZYpqiMyS+cS5wtPso+980fiObJffBLoFWn5a9NJKHwXzxHHE48a0QDmGFixPwVe4VTSHqki1KAt8HOOnWJgIs9O3wXcH/J7jgPvU3HeBca9KJTuuRy0iR9y86eqj8ikE/dXu0j5wlnMaA0e8546Thwjfkv0ulL+qspaDcDz9VfifIA+8afNN7BiZ3AE+1EE4cuGUhiUZW9Bgvf+DSTBPyD9TiXcwbkP3VWcq1X81nxNwgRh+y5fJJVrV4iCr3Vs+GPEd+US8V04R8rybPpcn8I9hEbl+0viSfwnGDf6ksrBHAuNOTYvSHMG9QVtOYPkW2IuftHHnzxM7Jndu7aHuTkYrsSBqhiunDw8YqFWvrc4TPz+inLuuEMlXzWogppzeqdXdNr9HcfuQ/VI/B0Yv79U5bnRF7/ol7/xohiV8Z49RcrGD6zt/y9+pUasrjlTIhIqhjlZcO/+NB7Eb+GItLdOu405A+DceiT+jozfXxJX4kdW/b0gIHKXk5TPm1rrWPUnG6TRqi8id8Uxqg/hwfXiU7EWfz+O+LsaYBtTIZZTDJ2cSwF2oqg1ae/nDBstNdq4h2GjGWPAS5dpRZVpRB0fwrivZQw7LA5knOvjlG2mS/w4AK7xzeEpUL1t/fUJL4j7e44fud5jfwE9dm53TbZxtpcFDIXGWPwZHPGPrYOesSXjezEmriVtYAXDxj6N17GXYYNeOTePUeavVJk2UZonUWK+PvFjDw0hSN/5s7WE6Rj9eGDCaszjxHftSs0x73ffip+pte13lnF7f5xbiKH4W3Nu6GGVEQ29+D7CaEgQZzjuwe0a3DN6AqtamseoP+IXRQ6RHRzg1gxMHSXENTfg6zsnDYWJKuf1YyXFqt0Wf6mdK/6qretiKX7Eec5NLZBmN6OJRYzvnaEjmhLkQJU2ejLO3ckol/ziF0UOiWiYj3Nd5eAG/eND0dXBFAXicV8/5vWSyoIlYaFSmrXOoSM/0NjQNYqh+BcI8glqvaIo/j6M79yu8twJMte9XKWNmYxzp0Uo/nuB9hA6OKFOuwo6OL+LVfZZw8QvRmigt8cBbii8506LvX/5wpdrcnZqXCScER7Vl+1ODelJlOB8bmQsxX+HwE7cCuUJaQDb0WDx3yKE5744Vbpcm2Wu9weV3/8Z49yOEYpfTbSnIu6iPcw0h7cXMEaoblK1fpXIsB4cXBtWONSZP1ZR/OLTI3biF6TQplflY/aMNNAcJEVb9IIlQKV06IZSzFzuOtsq2ECXzkWdc1lgr0WoX+IXQ6AfvscUKw6MvUWnGT4Mukgf1IoGVSx/XVH87j07Yi1+RDZDDErEx/i3wNeBjwiRreaayrA7WeGcroxBahH12cQI5jhWc8rWP/GLDWDTGqIV2Dicz48N5PXv+1yxvPeHf8eD+AUpzr5Lx+ALe+NlUvxZLR5g2NmkcM7LVHl8eiykPtuiYGMa43uHmuKnG8DmtUR7C/CR6u0bxRQJJWBUKU7EH0SmFPXw62gIn0hT/EpAN+OiEJ4F2kDmnH1UeVzf8Bj1mUvhSbSV8RRrZoqf1QAgJBk1QEOJM/GHhu/QLfmXIJ+vL7cWYLqgvKb3fca57Tllb2OMT9pJk2Pl1Oc9ODYaSA2MntsQTPFzFqbjzG9U4I9b8YeiiRSaxJVZhRoGyEQSt1wDYKUC5MmMTULLFYUc20Ydm6PB1Zpvil+hAUTjCYDzCgkgfhop0mTSOik8qdQAXlAIt/pUiuttqtyykGNPU8cOaJgjyDDFryZNefXSsFi/Lq/nvxcSUfx0mgCGPo/KiB9dkuYyNgqF8Px/Fk5T5fqHHGslhCeDsbYFWa9xfJCY4se9c4IpCobOAyyCyS6vxxDxew7tTXTxh8bfZ8sMlOXWCcxhlKczJ1szQpxNqDJ0vtBgxndd1BgZStyeH+P1uJVIMFHNsJngGXmyeTtqgdeXJOKXSxtA7pc5pxuj/AiqzFOMECeNN6kyqxiDePp7JiSt+DE92XP0oOhbV20oMGoRec2TxXvmpC7x46L5JBP/TQz3JOj6aJm1XUmV2cgIcdLopeA+jWFcV5vkFT/m2IzsLa7LDWwj4hRnYsueGaK/939lEvH+5zt9A16nQ1OKdAKIX2BMOgUpt4Z1E1X2VMgxXP9rZ4Q4aTRiDMDbyYRVz6r4LYk/4C17OjfMTfGePAaL2JcHkssUsjNr7DyZKa7q8p45Zdig13Poy7oWP6Yj7KC4XTAuj38KR/yNZc7JY5QPDpLTZUKcNLZQZSfJDJiX1QvxBzem4vnpuFYXtyyp3rFFdI8wqlOx8k1xhwcMcboP7Ca+4qtRm+tyvTS+LsVv5Yizs0Hiny+w9++Rwz0Cf93vLA2ipccGH0uf38Wwn1VvxC/23BNyie/qZRJvEPf0qTvxpzBi6yw/O1IcENgrxJRwkjpnifT5XpkQJ40WjLFGI8Zkmke6D/VH/IGF5X1hOeI3cdcA1O0TZNi+PZ8K7A1mu+u020eIfEuUxUL4gppbhdqbvbJCnDSOU3bQzfsz9dlulb+nrsV/n8DOoL2ZI34NO7YFmdMtkLTGWWAeC1SueqsuxZ/LESluX5gaoU1MHfgfx66a3Rn6MiaqRqsIcdJ4gzoHn5bHqM9eilPxt+Tcv9bM0lr26gyL2ICv7bt0Pi7Ej1slqtiodraBk1IHODcaK2qGwgBVoKIxOGDlLcFbr9IOvsChihGRUQpx0nhYCF/dRU++WeJU/CmceziNWVr1Ls0yuzfjABd3U46est3EvX9XYCANry/C3dxwIUvoGl9shIouG7x7zMCQZDtBfhvta8ClwAHAXwi1txzEXRIyJHfmrIwNXCZ5p4Zr2inI5wmp2TwXXQS5t8rYBfXbJ9a1+AUhfHFO0N3DLNkO0r1vIf7Vuz9/jbCG9RKjO5hjb1jiGixSr3x3obgHKG+iDF9lpDbJDV5KN1kwFv0EdfvIB+kQ1Kc4owC1boI1TcZekQY7H8nYWafBTizE/67K+ztJ95tZWOOB8gXPi+FN7LEjAS51xB5e1SZX8OTBvYJw8UuM3szSS+rljdxW46IUn9eKDjI2l2mwM07Gzqg4F38HQfmNLgHxR/OdXI5BPYhr1jNi7F+M9V8qggZRHZaWjMsX3Xs+EyfAMJwaUaoEvMguhu/kwgzINQaI3ie5SikRXgfm/l/i2O6vwc7dMtfYIs7FH5z08yqKPyZvY4ScIXSTjHztqGPoI8pvY7RZ7o5yagKG2t6K4ElwTgisr21pwDUUcHzeJhrtsNKsj2m0ESvxI9KktA8XV/xSrP9gMr99XQpznhbqDg2k8CQmg+Huari7wTYpFWID8B0h8KbCHIMEHwpcrngvxUhewdqUYaepRhu3M2wobdtyM+OcVjruBw7OfylFqHpKblELIbgOIeZvYK8Dmm9gN8FEua3TnSAQdzKLvzi7c3uzpk2wJ7syrYuTuNf/i1nDJriw53RKAaEUJaH4r7r6W5qaNWxCvgFkpd8PYilNIuG7IX2jp1mzJtS5P7b07iCaa0kg/DJHtqWPWaMmNAFE0waSwPYmrPAzrYftA9J+ZdakiYgAswA3QDrA8NIsy5EEEv4JWFI5juTk3GjWoAmDIkHpHTEpDMS1vtRm3Q896zn43w70x0jkdnFwnplWCNezARfkODLTUony3pYmTNTg/9SxB5WAdrwRAAAAAElFTkSuQmCC","style":"background: none;"}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"The Swift Programming Language日本語版","language":"ja","gitbook":"*","description":"[The Swift Programming Language](https://docs.swift.org/swift-book/)の日本語版です。"},"file":{"path":"language-reference/attributes.md","mtime":"2024-01-01T05:01:40.001Z","type":"markdown"},"gitbook":{"version":"3.7.5","time":"2024-01-01T05:02:05.580Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expand-active-chapter/expand-active-chapter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-published-with/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-insert-logo/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

